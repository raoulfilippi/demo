<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendario Prenotazioni Casa Mare</title>

  <!-- FullCalendar CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.css" rel="stylesheet">

  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #calendar { max-width: 900px; margin: 0 auto; }
    h1 { text-align: center; color: black; }
  </style>
</head>
<body>

<h1>Calendario Prenotazioni Casa Mare</h1>
<div id="calendar"></div>

<!-- Firebase compatibile (non modulare) -->
<script src="https://www.gstatic.com/firebasejs/8.16.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.16.0/firebase-firestore.js"></script>

<!-- FullCalendar JS compatibile -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.js"></script>

<script>
  // ðŸ”¹ Inserisci qui la tua configurazione Firebase
  var firebaseConfig = {
    apiKey: "API_KEY",
    authDomain: "PROJECT_ID.firebaseapp.com",
    projectId: "PROJECT_ID",
    storageBucket: "PROJECT_ID.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };

  // Inizializza Firebase
  firebase.initializeApp(firebaseConfig);
  var db = firebase.firestore();

  // Funzione per caricare prenotazioni e creare eventi
  function loadCalendar() {
    db.collection("prenotazioni casa mare").get().then(snapshot => {
      var events = [];
      snapshot.forEach(doc => {
        var data = doc.data();

        // FullCalendar esclude il giorno finale, quindi aggiungiamo 1 giorno
        var endDate = new Date(data.data_fine);
        endDate.setDate(endDate.getDate() + 1);

        events.push({
          title: data.nome,
          start: data.data_inizio,
          end: endDate.toISOString().split('T')[0],
          color: 'red'
        });
      });

      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        events: events,
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: ''
        }
      });
      calendar.render();
    }).catch(err => {
      console.error("Errore caricamento prenotazioni:", err);
    });
  }

  // Avvia il calendario
  loadCalendar();
</script>

</body>
</html>
